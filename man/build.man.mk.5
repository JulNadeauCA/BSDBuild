.\"
.\" Copyright (c) 2015 Hypertriton, Inc. <http://www.hypertriton.com/>
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE DEVELOPERS ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE DEVELOPERS BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd July 14, 2015
.Dt BUILD.MAN.MK 5
.Os
.ds vT BSDBuild Reference
.ds oS BSDBuild 1.0
.Sh NAME
.Nm build.man.mk
.Nd bsdbuild - compilation of UNIX manual pages
.Sh SYNOPSIS
.Fd .include <bsd.man.mk>
.Sh DESCRIPTION
The
.Nm
module processes UNIX manual pages files in
.Xr mandoc 1
format into presentation-ready documents in ASCII, PostScript,
PDF or HTML format.
.Sh TARGETS
.Bl -tag -width "install-man-dirs "
.It Ar all-catman
Produce preformatted manual pages from the specified mandoc source files.
Fail silently on systems where mandoc/nroff are unavailable, or where
preformatted manual pages are not preferred.
.It Ar clean-man
Clean up output files.
.It Ar install-man-dirs
Create empty section directories in ${MANDIR}.
.It Ar install-man
Install the manpages into ${MANDIR}.
.It Ar install-manlinks
Install the manpage symlinks into ${MANDIR}.
.It Ar man
Display a manpage (passed via the
.Dv MAN
argument), by feeding its ASCII formatted version to ${PAGER}.
.It Ar manlinks
Scan the ${MAN*} sources and auto-generate a
.Pa .manlinks.mk
file defining links for function names (i.e., where .Fn appears in a SYNOPSIS
or ".nr nS 1" block), or where the special directive "MANLINK(name)" appears
in a comment.
.It Ar lint
Parse only, produce no output.
Display verbose warnings.
.El
.Sh VARIABLES
.Bl -tag -width "MANLINKS "
.It Ev MAN[1-9]
List of mandoc input source files (with the .[1-9] extension).
.It Ev MANDOC
Mandoc processor (usually "mandoc" or "nroff -Tmandoc", depending on platform).
This is typically set by a ./configure script (the needed test is included
by default in all configure scripts by
.Xr mkconfigure 1 ) .
.It Ev MANLINKS
A list of symbolic links that should be created by the
.Ar install
target.
The elements of this list are of the form "Foo.1:Bar.1", where "Bar.1"
is the symbolic link, and "Foo.1" is the destination manpage.
Typically, 
.Ev MANLINKS
is defined in the
.Pa .manlinks.mk
files which are auto-generated by the
.Ar manlinks
target.
.El
.Sh SEE ALSO
.Xr build.common.mk 5 ,
.Xr build.lib.mk 5
.Sh HISTORY
.Nm
first appeared in BSDBuild 1.0.
.Pp
BSDBuild is based on the 4.4BSD build system.
