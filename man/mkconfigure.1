.\"
.\" Copyright (c) 2007 Hypertriton, Inc. <http://www.hypertriton.com/>
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
.\" INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
.\" (INCLUDING BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
.\" SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
.\" STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
.\" IN ANY WAY OUT OF THE USE OF THIS SOFTWARE EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd JULY 19, 2007
.Dt MKCONFIGURE 1
.Os
.ds vT BSDBuild Reference
.ds oS BSDBuild 1.0
.Sh NAME
.Nm mkconfigure
.Nd Compile BSDBuild configure scripts
.Sh SYNOPSIS
.Nm mkconfigure
.Sh DESCRIPTION
The
.Nm
program reads a
.Pa configure.in
source from the standard input and outputs a valid Bourne configure script to
the standard output.
.Pp
The
.Pa configure.in
source can contain a number of special directives, along with Bourne shell
code fragments that will be copied verbatim to the configure script.
.Pp
.Sh MKCONFIGURE DIRECTIVES
.Pp
.Nm
directives are case-insensitive.
The following directives are recognized:
.Bl -tag -width "REGISTER(name,descr) "
.It Ev REGISTER(name,descr)
Register a new configure script argument.
The
.Fa name
argument is usually of the form
.Ar --with-foo
or
.Ar --enable-foo ) ,
and
.Fa descr
is a description of the option (it is also customary to mention the default
value of this option in the description).
.It Ev HDEFINE(opt,val)
Define a C preprocessor style header option.
.Fa opt
is an unquoted, usually upper-case string and
.Fa val
is a string enclosed in double quotes.
For example, if
.Fa opt
is
.Sq ENABLE_FOO ,
a file
.Pa config/enable_foo.h
will be generated by configure.
.It Ev HUNDEF(opt)
Similar to
.Ev HDEFINE ,
except that
.Pa config/<option>.h
will contain an #undef directive.
.It Ev MDEFINE(opt,val)
Define a
.Xr make 1
variable, which will be visible in the project's makefiles.
.Fa opt
is again an unquoted, usually upper-case string and
.Fa val
is a value enclosed in double quotes.
.It Ev C_DEFINE(opt)
(C-style compilers only) Specify a global define that will be passed to
the compiler.
This results in the
.Ar -DFOO
flag being used in compiler command lines, but it is also interpreted by
.Xr build.proj.mk 5 .
.It Ev C_INCDIR(dir)
(C-style compilers only) Specify a directory for include files.
This results in the
.Ar -Idir
flag being added to the compiler command line, but it is also interpreted
by
.Xr build.proj.mk 5 .
.It Ev C_OPTION
Provide a gcc-style compiler option, such as
.Ar -Wall ,
.Ar -Werror
or
.Ar -Wmissing-prototypes .
For environments using other compilers, BSDBuild will attempt to set
equivalent options.
.It Ev C_EXTRA_WARNINGS
Request extra compiler warnings.
The exact meaning is compiler specific.
.It Ev C_FATAL_WARNINGS
Request that compilation fail if warnings are encountered.
.It Ev C_NO_SECURE_WARNINGS
Request that warnings about use of deprecated or obsolete APIs be silenced.
.El
.\" .Sh ENVIRONMENT
.\" .Sh FILES
.Sh SEE ALSO
.Xr build.prog.mk 5 ,
.Xr build.lib.mk 5 ,
.Xr build.common.mk 5
.Pp
http://hypertriton.com/bsdbuild/
